(()=>{"use strict";function e(e,t,n,a,s,o=1,c){this.brand=e,this.series=t,this.material=n,this.type=a,this.amount=s,this.price=o,this.number=c}let t={.5:0,1.5:1,"2.0":2,"5.0":3,18.9:5},n={AquaAlex:4,Luzhanska:3,"Tsilyshi Krynyci":2,Morshynska:5},a={Glass:1,Plastic:0},s={Gasified:2,Lowgasified:1,Nongasified:0};const o=function(e){const o=document.querySelector(".price-field");e.price=n[e.brand],e.price+=t[e.amount],e.price+=a[e.material],e.price+=s[e.type],e.price*=e.number,o.textContent=e.price+"$",window.getComputedStyle(o).opacity,o.style.opacity=1};class c{constructor(e){this.brand=e.brand,this.type=e.type,this.bottle=e.bottle,this.price=e.price,this.amount=e.amount,this.volume=e.volume}}class r extends c{constructor(e){super(e),this.series=e.series}}class i extends c{constructor(e){super(e),this.series=e.series}}class d extends c{constructor(e){super(e),this.series=e.series}}class l extends c{constructor(e){super(e)}}class u{constructor(e){this.volume=e}setAmount(e){return this.amount=e,this}setBottle(e){return this.bottle=e,this}setPrice(e){return this.price=e,this}setType(e){return this.type=e,this}getWater(){throw new Error(`Ð’ ${this.constructor.name} no method getWater()`)}}class p extends u{constructor(e){super(e),this.brand="Aqua Alex"}setSeries(e){return this.series=e,this}getWater(){if(!this.volume)throw new Error(`${this.constructor.name} invalid volume!@`);return new r(this)}}class m extends u{constructor(e){super(e),this.brand="Luzhanska"}setSeries(e){return this.series=e,this}getWater(){if(!this.volume)throw new Error(`${this.constructor.name} invalid volume!@`);return new i(this)}}class h extends u{constructor(e){super(e),this.brand="Tsilyshi Krynyci"}setSeries(e){return this.series=e,this}getWater(){if(!this.volume)throw new Error(`${this.constructor.name} invalid volume!@`);return new d(this)}}class y extends u{constructor(e){super(e),this.brand="Morshinska"}getWater(){if(!this.volume)throw new Error(`${this.constructor.name} invalid volume!@`);return new l(this)}}const v=(()=>{let e=[];const t=t=>e[t],n=()=>e.length,a=()=>{localStorage.setItem("bottle",JSON.stringify(e))},s=()=>{e=JSON.parse(localStorage.getItem("bottle")||"[]"),console.log(e),0==n()?document.querySelector(".cart-conter").innerText="":document.querySelector(".cart-conter").innerText=v.getLength(),window.getComputedStyle(document.querySelector(".cart-conter")).opacity,document.querySelector(".cart-conter").style.opacity=1};return{getitem:t,setItem:t=>{e.push(t),a(),document.querySelector(".cart-conter").innerText=v.getLength(),window.getComputedStyle(document.querySelector(".cart-conter")).opacity,document.querySelector(".cart-conter").style.opacity=1},getLength:n,removeElement:t=>{e.splice(t,1),a(),0==n()?document.querySelector(".cart-conter").innerText="":document.querySelector(".cart-conter").innerText=v.getLength(),window.getComputedStyle(document.querySelector(".cart-conter")).opacity,document.querySelector(".cart-conter").style.opacity=1},totalSum:()=>{let e=0;for(let a=0;a<n();a++)e+=t(a).price;return e},saveLocal:a,getLocal:s,emptyCart:()=>{e=[],a(),s()}}})(),C=v,g=new class{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}broadcast(e){this.observers.forEach((t=>t(e)))}};function b(e){for(const[t,n]of Object.entries(e))if(console.log(`${t}: ${n}`),null==n)return!1;return!0}let L;const E=function(){const t=new e;document.querySelectorAll(".gas-button, .bottle-wrapper, .material-button"),function(e){const t=document.querySelectorAll(".gas-button, .bottle-wrapper, .material-button");t.forEach((t=>{t.addEventListener("click",(()=>{L=!1,e.amount=void 0,g.broadcast(t.textContent),b(e)?o(e):document.querySelector(".price-field").textContent=""}))})),document.querySelector("#input-amount").addEventListener("change",(()=>{e.number=document.querySelector("#input-amount").value,b(e)&&o(e)})),document.querySelector(".order-button").addEventListener("click",(()=>{if(b(e)){C.setItem(function(e){const t=e.brand;return console.log("2rfwef",t),"AquaAlex"==t?new p(e.amount).setAmount(e.number).setPrice(e.price).setSeries(e.series).setBottle(e.material).setType(e.type).getWater():"Luzhanska"==t?new m(e.amount).setAmount(e.number).setPrice(e.price).setSeries(e.series).setBottle(e.material).setType(e.type).getWater():"Tsilyshi Krynyci"==t?new h(e.amount).setAmount(e.number).setPrice(e.price).setSeries(e.series).setBottle(e.material).setType(e.type).getWater():"Morshynska"==t?new y(e.amount).setAmount(e.number).setPrice(e.price).setBottle(e.material).setType(e.type).getWater():void 0}(e)),t.forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")})),document.querySelector(".price-field").textContent="",e.amount=void 0,e.material=void 0,e.type=void 0;for(let e=0;e<C.getLength();e++)console.log(C.getitem(e))}}))}(function(e){return document.querySelectorAll(".gas-button, .bottle-wrapper, .material-button").forEach((t=>{g.subscribe((()=>{if(t.classList.contains("active")){t.classList.contains("gas-button")&&(e.type=t.textContent),t.classList.contains("material-button")&&(e.material=t.textContent),t.classList.contains("bottle-wrapper")&&(e.amount=t.textContent,e.series=t.parentElement.previousSibling.textContent,console.log("active:",t),L=!0),console.log("gtfo",L),L||(e.amount=void 0),e.number=document.querySelector("#input-amount").value;const n=document.querySelectorAll(".button-nav");console.log(n),n.forEach((t=>{t.classList.contains("active")&&(e.brand=t.textContent)}))}}))})),e}(t)),console.log(g.observers)};function f(e,t){const n=document.createElement("div");n.classList.add("bottle-wrapper");const a=document.createElement("img");a.classList.add("constructor-img"),a.src=`https://www.shmv.com.ua/images/tara/${t}.png`;const s=document.createElement("h2");return s.classList.add("bottle-liter"),s.textContent=e,n.appendChild(a),n.appendChild(s),n}function w(e){e.forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("active")||function(e){document.querySelectorAll(`.${e.className}`).forEach((e=>{e!==this&&e.classList.remove("active")})),e.classList.add("active")}(e)}))}))}function S(e){e.forEach((e=>{e.addEventListener("click",(e=>{!function(e){const t=document.querySelectorAll(".bottle-wrapper"),n=document.querySelectorAll(".gas-button"),a=document.querySelectorAll(".material-button"),s=document.querySelector("#title1");let o,c,r=document.querySelector("#title2");null==r&&(r=""),n.forEach((e=>{e.classList.contains("active")&&(o=e.textContent)})),a.forEach((e=>{e.classList.contains("active")&&(c=e.textContent)})),t.forEach(((e,t)=>{"Luzanska 3"==s.textContent&&"Nongasified"==o?(e.style="filter: grayscale(100%); pointer-events: none;",e.classList.remove("active")):"Polyana Kvasova"==r.textContent&&"Nongasified"==o&&t>4||("Gasified"==o||"Lowgasified"==o)&&parseFloat(e.lastChild.textContent)>2||"Glass"==c&&parseFloat(e.lastChild.textContent)>.5?(e.style="filter: grayscale(100%); pointer-events: none",e.classList.remove("active")):e.style=""}))}(e.target)}))}))}const x=function(e,t){const n=document.querySelector("#main");n.textContent="",n.appendChild(function(e,t){const n=document.createElement("div");n.classList.add("constructor-page");const a=document.createElement("div");a.classList.add("picture-menu-wrapper");const s=document.createElement("div");s.classList.add("all-cards-wrapper");const o=document.createElement("div");o.classList.add("card1-wrapper");const c=document.createElement("div");c.classList.add("card"),c.setAttribute("id","card-1");const r=document.createElement("h2");if(r.textContent=e,r.setAttribute("id","title1"),c.appendChild(f("0.5","0-5")),c.appendChild(f("1.5","1-5")),c.appendChild(f("2.0","2-0")),"Vershina"!=e&&"Morshynska"!=e&&"Shayanska"!=e||(c.appendChild(f("5.0","5-0")),c.appendChild(f("18.9","18-9"))),o.appendChild(r),o.appendChild(c),s.appendChild(o),void 0!==t||"Drugivska"==t){const e=document.createElement("div");e.classList.add("card2-wrapper");const n=document.createElement("div");n.classList.add("card"),n.setAttribute("id","card-2");const a=document.createElement("img");a.classList.add("constructor-img"),a.src="/123.png";const o=document.createElement("h2");o.textContent=t,o.setAttribute("id","title2"),console.log(t),n.appendChild(f("0.5","0-5")),n.appendChild(f("1.5","1-5")),n.appendChild(f("2.0","2-0")),"Drugivska"==t&&(n.appendChild(f("5.0","5-0")),n.appendChild(f("18.9","18-9"))),e.appendChild(o),e.appendChild(n),s.appendChild(e)}return a.appendChild(s),n.appendChild(a),n.appendChild(function(){const e=document.createElement("div");e.classList.add("builder-wrapper");const t=document.createElement("h2");t.innerText="Available options",t.classList.add("builder-title");const n=document.createElement("div");n.classList.add("gas-wrapper");const a=document.createElement("div");a.classList.add("gas-button"),a.setAttribute("id","gasified"),a.innerText="Gasified";const s=document.createElement("div");s.classList.add("gas-button"),s.setAttribute("id","nonGasified"),s.innerText="Nongasified";const o=document.createElement("div");o.classList.add("gas-button"),o.setAttribute("id","LowGasified"),o.innerText="Lowgasified",n.appendChild(a),n.appendChild(s),n.appendChild(o);const c=document.createElement("div");c.classList.add("material-wrapper");const r=document.createElement("div");r.classList.add("material-button"),r.setAttribute("id","glass"),r.innerText="Glass";const i=document.createElement("div");i.classList.add("material-button"),i.setAttribute("id","plastic"),i.innerText="Plastic",c.appendChild(r),c.appendChild(i);const d=document.createElement("div");d.classList.add("vertical-wrapper");const l=document.createElement("div");l.classList.add("amount-wrapper");const u=document.createElement("input");u.type="number",u.setAttribute("id","input-amount"),l.appendChild(u),u.defaultValue=1,u.min=1,u.max=1e3,d.appendChild(c),d.appendChild(l);const p=document.createElement("div");p.classList.add("price-wrapper");const m=document.createElement("div");m.classList.add("price-field"),m.textContent="10$";const h=document.createElement("div");return h.classList.add("order-button"),h.textContent="Confirm",p.appendChild(m),p.appendChild(h),e.appendChild(t),e.appendChild(n),e.appendChild(d),e.appendChild(p),e}()),n}(e,t)),w(document.querySelectorAll(".bottle-wrapper"));const a=document.querySelectorAll(".gas-button");w(a);const s=document.querySelectorAll(".material-button");w(s),S(a),S(s),E(),window.getComputedStyle(document.querySelector(".all-cards-wrapper")).opacity,document.querySelector(".all-cards-wrapper").style.opacity=1},q=["Brand","Series","Type","Bottle","Volume","Amount","Price"];function A(){const e=document.querySelector(".cart-area");if(e.innerHTML="",0==C.getLength()){const t=document.createElement("h1");t.classList.add("nothing"),t.textContent="Your cart is empty",e.appendChild(t)}else e.appendChild(function(){const e=document.createElement("div");e.classList.add("table-wrapper");const t=document.createElement("table"),n=document.createElement("tbody");for(let e=0;e<C.getLength();e++){const t=document.createElement("tr");for(let n=0;n<7;n++){const a=document.createElement("td");a.appendChild(document.createTextNode(k(C.getitem(e))[n])),t.appendChild(a)}const a=document.createElement("td");a.appendChild(document.createTextNode("X")),a.classList.add("remove-button"),a.setAttribute("index",`${e}`),a.addEventListener("click",(()=>{C.removeElement(a.getAttribute("id")),A()})),t.appendChild(a),n.appendChild(t)}const a=document.createElement("thead");t.appendChild(a);for(let e=0;e<q.length;e++)a.appendChild(document.createElement("th")).appendChild(document.createTextNode(q[e]));return t.appendChild(n),e.appendChild(t),e}()),e.appendChild(function(){const e=document.createElement("div");e.classList.add("confirm-button"),e.textContent="Confirm",e.addEventListener("click",(()=>{C.emptyCart();const e=document.createElement("h1");e.textContent="Thank you for the order!",e.classList.add("final-message"),document.querySelector(".cart-area").innerHTML="",document.querySelector(".cart-area").appendChild(e),window.getComputedStyle(document.querySelector(".final-message")).opacity,document.querySelector(".final-message").style.opacity=1}));const t=document.createElement("span");t.classList.add("total-sum"),t.textContent="Your total: "+C.totalSum()+"$";const n=document.createElement("div");return n.classList.add("final-wrapper"),n.appendChild(t),n.appendChild(e),n}()),window.getComputedStyle(document.querySelector(".total-sum")).opacity,document.querySelector(".total-sum").style.opacity=1;window.getComputedStyle(e).opacity,e.style.opacity=1}function k(e){const t=[];return t.push(e.brand),t.push(e.series),t.push(e.type),t.push(e.bottle),t.push(e.volume),t.push(e.amount),t.push(e.price),t}const T=function(){const e=document.querySelector("#main");e.textContent="",console.log(e);const t=document.createElement("div");t.classList.add("cart-page"),e.appendChild(t);const n=document.createElement("div");n.classList.add("cart-wrapper");const a=document.createElement("div");a.classList.add("cart-area"),n.appendChild(a),t.appendChild(n),A(),window.getComputedStyle(n).opacity,n.style.opacity=1};function $(e,t){const n=document.createElement(`${t}`);return n.classList.add("main-text"),n.textContent=e,n}const B=function(){const e=document.querySelector("#content");console.log(e),e.textContent="";const t=document.createElement("div");t.classList.add("left-wrapper");const n=document.createElement("img");n.classList.add("main-logo"),n.src="/main-logo.svg";const a=document.createElement("div");a.classList.add("text-wrapper"),t.appendChild(n),a.appendChild($("Best","h2")),a.appendChild($("Transcarpathian","h2")),a.appendChild($("Water","h2")),a.appendChild($("Bradford","h1")),t.appendChild(n),t.appendChild(a);const s=document.createElement("div");s.classList.add("right-wrapper");const o=document.createElement("div");o.classList.add("main-button"),o.textContent="Choose your bottle",o.addEventListener("click",(()=>{G()})),s.appendChild(o);const c=document.createElement("welcome-wrapper");c.classList.add("welcome-wrapper"),c.appendChild(t),c.appendChild(s),e.appendChild(c),window.getComputedStyle(c).opacity,c.style.opacity=1};function W(e){document.querySelectorAll(".button-nav, #cart-logo").forEach((e=>{e!==this&&e.classList.remove("active")})),e.classList.add("active")}const G=function(){const e=document.querySelector("#content");e.innerHTML="",e.appendChild(function(){const e=document.createElement("div");e.classList.add("header");const t=document.createElement("img");t.setAttribute("id","main-logo"),t.src="https://images.squarespace-cdn.com/content/v1/5558b449e4b02de6a6eda24f/1431976056800-0N3XY7YL8W9RVTGT3CFC/Small+Logo.png";const n=document.createElement("h1");n.setAttribute("id","main-title"),n.textContent="Bradford",n.addEventListener("click",(()=>{B()}));const a=document.createElement("div");a.setAttribute("id","logo-wrapper"),a.appendChild(t),a.appendChild(n),a.addEventListener("click",(()=>{B()}));const s=document.createElement("img");s.setAttribute("id","cart-logo"),s.src="https://cdn-icons-png.flaticon.com/512/263/263142.png",s.addEventListener("click",(e=>{e.target.classList.contains("active")||(T(),W(s))}));const o=document.createElement("div");o.classList.add("cart-conter");const c=document.createElement("div");return c.setAttribute("id","cart-wrapper"),c.appendChild(s),c.appendChild(o),e.appendChild(a),e.appendChild(function(){const e=document.createElement("nav");e.classList.add("topnav");const t=document.createElement("button");t.textContent="AquaAlex",t.classList.add("button-nav","visible"),t.addEventListener("click",(e=>{e.target.classList.contains("active")||(W(t),x("Vershina","Polyana Kvasova"))}));const n=document.createElement("button");n.textContent="Luzhanska",n.classList.add("button-nav","visible"),n.addEventListener("click",(e=>{e.target.classList.contains("active")||(W(n),x("Luzanska 3","Luzanska 7"))}));const a=document.createElement("button");a.textContent="Tsilyshi Krynyci",a.classList.add("button-nav","visible"),a.addEventListener("click",(e=>{e.target.classList.contains("active")||(W(a),x("Shayanska","Drugivska"))}));const s=document.createElement("button");return s.textContent="Morshynska",s.classList.add("button-nav","visible"),s.addEventListener("click",(e=>{e.target.classList.contains("active")||(W(s),x("Morshynska"))})),e.appendChild(t),e.appendChild(n),e.appendChild(a),e.appendChild(s),e}()),e.appendChild(c),e}()),e.appendChild(function(){const e=document.createElement("div");return e.setAttribute("id","main"),e}()),e.appendChild(function(){const e=document.createElement("div");e.classList.add("footer");const t=document.createElement("h2");t.classList.add("madeBy"),t.textContent="Made By Oleg Gavashi";const n=document.createElement("a");return n.classList.add("link"),n.href="https://github.com/ogavashi",n.textContent="GitHub",n.target="blank",e.appendChild(t),e.appendChild(n),e}()),W(document.querySelector(".button-nav")),x("Vershina","Polyana Kvasova"),C.getLocal();const t=document.querySelector(".header"),n=document.querySelector("#main"),a=document.querySelector(".footer");console.log(t,n,a),window.getComputedStyle(t).opacity,t.style.opacity=1,window.getComputedStyle(n).opacity,n.style.opacity=1,window.getComputedStyle(a).opacity,a.style.opacity=1};B()})();